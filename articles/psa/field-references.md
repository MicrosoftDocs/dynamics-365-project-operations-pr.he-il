---
title: הוספת שדות מותאמים אישית להגדרת מחיר וישויות של עסקאות
description: נושא זו מספק מידע על הוספת שדות מותאמים אישית להגדרת מחיר וישויות של עסקאות.
author: Rumant
manager: kfend
ms.custom:
- dyn365-projectservice
ms.date: 10/01/2020
ms.topic: article
ms.service: business-applications
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.openlocfilehash: 32d0dbc3a69d713dcae8d27e52f2a0c6fc296127
ms.sourcegitcommit: 5c4c9bf3ba018562d6cb3443c01d550489c415fa
ms.translationtype: HT
ms.contentlocale: he-IL
ms.lasthandoff: 10/16/2020
ms.locfileid: "4077414"
---
# <a name="add-custom-fields-to-price-setup-and-transactional-entities"></a>הוספת שדות מותאמים אישית להגדרת מחיר וישויות של עסקאות 
‏‫נושא זה יוצא מנקודת הנחה שהשלמת את ההליכים בנושא [‬‏‫יצירת שדות וישויות מותאמים אישית‬‏‫](create-custom-fields-entities.md). אם לא השלמת הליכים אלה, חזור והשלם אותם ולאחר מכן חזור לנושא זה. 

בנושא זה, ההליכים יראו לך כיצד להוסיף את ההפניות הדרושות בשדות מותאמים אישית לישויות ולרכיבי ממשק המשתמש (UI), כגון טפסים ותצוגות.

## <a name="add-custom-pricing-dimension-fields"></a>הוספת שדות מותאמים אישית לממד תמחור 
לאחר יצירת ישויות ושדות מותאמים אישית, השלב הבא יהיה לגרום להגדרת מחיר וישויות של עסקאות‬ להיות מודעים לישויות מותאמות אישית או לקבוצת אפשרויות על-ידי יצירת שדות הפניה. אם רשימת ממדי התמחור שלך כוללת ממדים של קבוצת אפשרויות או ממדים של ישויות או את שתיהן, בצע רק את השלבים תחת **ממדי תמחור מותאמים אישית המבוססים על קבוצת אפשרויות** או תחת **ממדי תמחור מותאמים אישית המבוססים על ישות** , או את השלבים של שתי האפשרויות, בהתאמה.

### <a name="option-set-based-custom-pricing-dimensions"></a>ממדי תמחור מותאמים אישית המבוססים על קבוצת אפשרויות
כאשר ממד תמחור מותאם אישית מבוסס על מערכת אפשרויות, הוסף אותו כשדה ליישויות מרכזיות של Project Service. בהליך הבא, **מיקום עבודה של משאב** ו **שעות עבודה  של משאב** משמשים כממדי תמחור שמבוססים על קבוצת אפשרויות. יש להוסיף אותם תחילה כשדות לישויות התמחור, **מחיר תפקיד** ו **ייקור מחיר תפקיד**.

1. ב- Project Service Automation ‏(PSA), לחץ על **הגדרות** > **פתרונות** , ולאחר מכן לחץ לחיצה כפולה על **\<your organization name> ממדי תמחור**. 
2. בסייר הפתרונות, בחלונית הניווט הימנית בחר **ישויות > מחיר תפקיד**.
3. הרחב את הישות **מחיר תפקיד** ובחר **שדות**.
4. לחץ על **חדש** כדי ליצור שדה חדש הנקרא **מיקום עבודה של משאב** ובחר **קבוצת אפשרויות** כסוג השדה. 
5. בחר **השתמש בקבוצת אפשרויות קיימת** , בחר את קבוצת האפשרויות **מיקום עבודה של משאב** ולאחר מכן לחץ על **שמור**.
6. חזור על שלבים 1 עד 5 כדי להוסיף שדה זה לישות **ייקור מחיר תפקיד**. 
7. חזור על שלבים 1 עד 5 עבור קבוצת האפשרויות **שעות עבודה של משאב**.

> [!IMPORTANT]
> בעת הוספת שדה ליותר מישות אחת, השתמש באותו שם שדה בכל הישויות. 

> ![הוספת מיקום עבודה של משאב למחיר התפקיד](media/RWL-Field.png)

בשלבי המכירות וההערכה בפרוייקט, הערכות של מאמץ העבודה שנדרש כדי להשלים עבודה **באופן מקומי** ועבודה **באתר הלקוח** , ב **שעות רגילות** וב **שעות נוספות**  משמשים כדי להעריך את הערך של הצעת המחיר/הפרוייקט. השדות **מיקום עבודה של משאב** ו **שעות עבודה של משאב** יתווספו אל ישויות הערכה, **‏‫פרטים בשורת הצעת מחיר‬** , **פרטים בסעיף חוזה** , ‏‫ **משימה בפרויקט** , **חבר צוות פרויקט‬** ו **‏‫שורת הערכה‬**.

1. ב-PSA, בחר **הגדרות** > **פתרונות** ולחץ פעמיים על **\<your organization name> ממדי תמחור**. 
2. בסייר הפתרונות, בחלונית הניווט הימנית בחר **ישויות > פרטים בשורת הצעת מחיר‬**.
3. הרחב את הישות **פרטים בשורת הצעת מחיר‬** ובחר **שדות**.
4. לחץ על **חדש** כדי ליצור שדה חדש הנקרא **מיקום עבודה של משאב** ובחר את סוג השדה **קבוצת אפשרויות**. 
5. בחר **השתמש בקבוצת אפשרויות קיימת** וב **מיקום עבודה של משאב** ולאחר מכן לחץ על **שמור**.
6. חזור על שלבים 1 עד 5 כדי להוסיף שדה זה אל הישויות **‏‫פרט סעיף חוזה של פרויקט‬** , ‏‫ **משימה בפרויקט** , **חבר צוות פרויקט‬** ו **שורת הערכה**.
7. חזור על שלבים 1 עד 6 עבור קבוצת האפשרויות **שעות עבודה של משאב**. 

> ![הוספת מיקום עבודה של משאב לשורת הערכה](media/RWL-Default-Value.png)


עבור מסירה והפקת חשבונית, עבודה שהושלמה צריכה להיות מתומחרת במדויק כדי לבחור אם היא בוצעה **באופן מקומי** או **באתר הלקוח** , והאם היא הושלמה במהלך **השעות הרגילות** או **בשעות נוספות** בנתונים בפועל של הפרוייקט. יש להוסיף את השדות **מיקום עבודה של משאב** ו **שעות עבודה של משאב** אל הישויות **‏‫ערך זמן‬** , **בפועל** , **פרטים בשורת חשבונית** ו **שורת יומן**.

1. ב-PSA, בחר **הגדרות** > **פתרונות** ולחץ פעמיים על **\<your organization name> ממדי תמחור**.
2. בסייר הפתרונות, בחלונית הניווט הימנית בחר **ישויות > ערך זמן**.
3. הרחב את הישות **פרטים בשורת הצעת מחיר‬** ולאחר מכן בחר **שדות**.
4. לחץ על **חדש** כדי ליצור שדה חדש הנקרא **מיקום עבודה של משאב** ובחר **קבוצת אפשרויות** כסוג השדה. 
5. בחר **השתמש בקבוצת אפשרויות קיימת** , בחר את קבוצת האפשרויות **מיקום עבודה של משאב** ולאחר מכן לחץ על **שמור**.
6. חזור על שלבים 1 עד 5 כדי להוסיף שדה זה אל הישויות **בפועל** , **פרטים בשורת חשבונית** ו **שורת יומן**.
7. חזור על שלבים 1 עד 6 עבור קבוצת האפשרויות **שעות עבודה של משאב**. 

> ![הוספת מיקום עבודה של משאב לערך זמן](media/RWL-time-entry.png)

פעולה זו משלימה את שינויי הסכימה הדרושים עבור ממדים מותאמים אישית המבוססים על קבוצת אפשרויות.

## <a name="entity-based-custom-pricing-dimensions"></a>ממדי תמחור מותאמים אישית המבוססים על ישות

כאשר ממד התמחור שמותאם אישית הוא ישות, עליך להוסיף קשר יחיד לרבים (‎1:N) קשרים בין ישות הממד לבין הישויות המרכזיות ב- Project Service. בעת השימוש בדוגמה 'כותרת סטנדרטית' מלמעלה, סביר להניח שלכל עובד מוקצית כותרת סטנדרטית. כתוצאה מכך, תזדקק לקשר יחיד לרבים (‎1:N) מ'כותרת סטנדרטית' ל'משאב הניתן להזמנה', או לקשר רבים ליחיד (N:1) אם הוא נוצר מ'משאב הניתן להזמנה' ל'כותרת סטנדרטית'.

1. ב-PSA, בחר **הגדרות** > **פתרונות** ולחץ פעמיים על **\<your organization name> ממדי תמחור**. 
2. בסייר הפתרונות, בחלונית הניווט הימנית בחר **ישויות > כותרת סטנדרטית**.
3. הרחב את הישות **כותרת סטנדרטית** ובחר **קשרי יחיד לרבים**.
4. לחץ על **חדש** כדי ליצור קשר יחיד לרבים (‎1:N) חדש שנקרא **כותרת סטנדרטית למשאב הניתן להזמנה**. הזן את המידע הדרוש ולאחר מכן לחץ על **שמור**.

> ![הוספת כותרת סטנדרטית כשדה הפניה למשאב הניתן להזמנה](media/ST-BR.png)

יש להוסיף את הכותרת הסטנדרטית אל ישויות התמחור ב- Project Service, **מחיר תפקיד** ו **ייקור מחיר תפקיד**. ניתן השלים זאת גם באמצעות קשרי יחיד לרבים (‎1:N) בין הישות **כותרת סטנדרטית** והישות **מחיר תפקיד** והישות **כותרת סטנדרטית** והישות **ייקור מחיר תפקיד**.

1. בסייר הפתרונות, בחלונית הניווט הימנית בחר **ישויות > כותרת סטנדרטית**.
2. הרחב את הישות **כותרת סטנדרטית** ובחר **קשרי יחיד לרבים**.
3. לחץ על **חדש** כדי ליצור קשר יחיד לרבים (‎1:N) חדש שנקרא **כותרת סטנדרטית למחיר תפקיד**. הזן את המידע הדרוש ולאחר מכן לחץ על **שמור**.
4. חזור על שלבים 1 עד 4 כדי ליצור קשרי יחיד לרבים (‎1:N) בין הישות **כותרת סטנדרטית** והישות **ייקור מחיר תפקיד** ,

בשלבי המכירות וההערכה בפרויקט, כדי לנקוב במחיר להצעת המחיר/פרויקט, נדרשות הערכות של מאמץ העבודה עבור כל כותרת סטנדרטית. המשמעות היא שנדרשים קשרי יחיד לרבים מכותרת סטנדרטית לכל אחד מישויות ההערכה האלו ב- Project Service: 

- **פרטים בשורת הצעת מחיר**
- **פרט סעיף חוזה של פרויקט**
- **משימת פרויקט**
- **חבר צוות פרוייקט**
- **שורת הערכה**

5. חזור על שלבים 1 עד 5 כדי ליצור קשרי יחיד לרבים מ **כותרת סטנדרטית** ל **‏‫פרטים בשורת הצעת מחיר‬** , **פרט סעיף חוזה של פרויקט** , **משימה בפרויקט** , **חבר צוות פרויקט‬** ו **‏‫שורת הערכה**.

> ![הוספת כותרת סטנדרטית כשדה הפניה ל‏‫שורת הערכה](media/ST-Estimate-Line.png)

בשלבי המסירה והפקת החשבונית, העבודה שהושלמה על-ידי כל כותרת סטנדרטית חייבת להיות מתומחרת במדויק בנתונים בפועל של הפרוייקט. פירוש הדבר שצריכים להיות קשרי יחיד לרבים מ **כותרת סטנדרטית** לישויות **ערך זמן** , **בפועל** , **פרטי שורה בחשבונית‬** ו **שורת יומן**.

6. חזור על שלבים 1 עד 6 כדי ליצור קשרי יחיד לרבים מ **כותרת סטנדרטית** לישויות **ערך זמן** , **בפועל** , **פרטי שורה בחשבונית‬** ו **שורת יומן**.

> ![הוספת כותרת סטנדרטית כשדה הפניה ל‏‫ערך זמן](media/ST-Mapping.png)

### <a name="set-up-dimension-value-defaulting-using-the-mappings-features-of-the-platform"></a>הגדרת ברירת מחדל לערך ממד באמצעות תכונות המיפוי של הפלטפורמה
עבור 'ערך זמן', כדאי שהמערכת תיצור את הכותרת הסטנדרטית כברירת מחדל ב'ערך זמן' מ'משאב ניתן להזמנה' שמתעד את ערך הזמן. השתמש בשלבים הבאים כדי להוסיף מיפויי שדות מקשר יחיד לרבים מ **משאב הניתן להזמנה** ל **ערך זמן**.

1. בסייר הפתרונות, בחלונית הניווט הימנית בחר **ישויות > כותרת סטנדרטית**.
2. הרחב את הישות **כותרת סטנדרטית** ובחר **קשרי יחיד לרבים**.
3. לחץ לחיצה כפולה על **משאב הניתן להזמנה‏‎ לערך זמן**. בדף **קשר** , לחץ על **השתמש במיפויי שדה**. 
4. לחץ על **חדש** כדי ליצור מיפוי שדה חדש בין השדה **כותרת סטנדרטית** בישות **משאב הניתן להזמנה** לשדה ההפניה **כותרת סטנדרטית** בישות **ערך זמן**. 

> ![הגדרת מיפויי שדות כדי לאפשר יצירת ברירת מחדל של כותרת סטנדרטית ממשאב הניתן להזמנה לערך זמן](media/ST-Mapping2.png)


פעולה זו משלימה את שינויי הסכימה הדרושים עבור ממדים מותאמים אישית המבוססים על ישות.

##  <a name="add-custom-fields-to-forms-views-and-business-rules"></a>הוספת שדות מותאמים אישית לטפסים, לתצוגות ולכללים עסקיים

לאחר שביצעת את כל שינויי הסכימה הנדרשים, השלב הבא יהיה להפוך את השדות לגלויים בממשק המשתמש על-ידי הוספת השדות לטפסים ולתצוגות.

1. פתח את הטופס או את התצוגה. בחלונית הניווט השמאלית, בחר את השדה וגרור אותו אל בד הציור של הטופס. 
2. אם אתה עורך תצוגה, השתמש בחלונית הניווט השמאלית, לחץ על **הוסף שדות** ובתיבת הדו-שיח **פירוט שדות** בחר את השדות הרצויים ולחץ על **אישור**.

הטבלה הבאה מספקת רשימה מקיפה של הטפסים והתצוגות המוגדרים מראש, לפי ישות, שיהיה צורך לעדכן אותם בשדות החדשים. אם ברשותך תצוגות או טפסים נוספים בהתאמות האישיות שלך בישויות אלה, הוסף את השדות החדשים גם להם.

| ישות ב- Project Service        | טפסים הזקוקים לשדה החדש   |תצוגות הזקוקות לשדה החדש      |
| ------------------------------|---------------------------------|----------------------------------|
|  מחיר תפקיד|• מידע |• מחירי קטגוריות משאבים פעילים<br> • תצוגה משויכת של מחיר קטגוריות משאבים|
|  ייקור מחיר תפקיד|• מידע|• ייקור מחיר התפקיד הפעיל<br>• תצוגה משויכת של ייקור מחיר התפקיד|
|  פרטים בשורת הצעת מחיר|• פרטי פרויקט<br>• יצירה מהירה של פרויקט|• פרטים בשורת הצעת מחיר פעילה<br>• פרטי שורה של הצעת מחיר משולבת<br>• תצוגה משויכת של פרטי שורה בהצעת מחיר|
|  פרט סעיף חוזה של פרויקט|• פרטי פרויקט<br>• יצירה מהירה של פרויקט|• פרטי סעיף חוזה משולב<br>• פרטי סעיף חוזה פעיל<br>• תצוגה משויכת של פרטים בסעיף חוזה|
|  משימת פרויקט|• מידע<br>• טופס חדש||
|  חבר צוות פרוייקט|• מידע<br>• טופס חדש|• חברי צוות פרויקט פעיל<br>• חברי צוות פרויקט<br>• תצוגה משויכת של חברי צוות פרויקט|
|  ערך זמן|• מידע<br>• יצירת ערך זמן|• ערכי הזמן שלי לפי תאריך<br>• ערכי הזמן שלי לשבוע זה<br>• ערכי זמן לאישור|
|  שורת יומן|• מידע<br>• יצירה מהירה|• שורות יומן פעיל<br>• תצוגה משויכת של שורת יומן|
|  פרט בשורת חשבונית|• מידע<br>• יצירה מהירה|• פרטי שורה בחשבונית פעילה<br>• עסקאות חשבונית לחיוב<br>• עסקאות חשבונית ללא תשלום<br>• תצוגה משויכת של פרטי שורה בחשבונית<br>• עסקאות חשבונית שאינן ניתנות לחיוב|
|  בפועל|• מידע<br>• נתונים בפועל פעילים|• תצוגה משויכת של נתונים בפועל|

ייתכן שיהיה צורך להוסיף שדות מותאמים אישית גם בכללים עסקיים, בהתאם להגדרות שהגדרת. דוגמה אחת המוכנה לשימוש היא עבור הכלל העסקי **אפשרות עריכה של ערך זמן על-בסיס מצב**. כלל זה מגדיר אילו שדות יש לנעול כאשר ערך הזמן נמצא במצב שאינו ניתן לעריכה, כגון **אושר**. הוסף שדות לכלל עסקי זה כך שהשדות יהיו נעולים לעריכה כאשר ערך הזמן נמצא במצב שאינו **טיוטה** או **הוחזר**.
